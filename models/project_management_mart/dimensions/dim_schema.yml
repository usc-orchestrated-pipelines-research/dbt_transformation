version: 2

models:
  # ===================== PROJECT DIM =====================
  - name: project_dim
    description: "Dimension table for project details"
    columns:
      - name: project_key
        description: "Surrogate key for project"
        tests:
          - not_null        # é«˜äº®è¦æ±‚ï¼šNot Null
          - unique          # é«˜äº®è¦æ±‚ï¼šUnique

      - name: project_id
        description: "Natural key for project"
        tests:
          - not_null        # é«˜äº®è¦æ±‚ï¼šNot Null

      - name: type
        description: "Type of project billing"
        tests:
          - accepted_values:    # é«˜äº®è¦æ±‚ï¼šAccepted values
              values: ['Fixed', 'Time and Material']

      - name: price    #   description: "Project price"
        tests:
          - test_project_price_no_negatives

      - name: planned_start_date   #All dates instead of start and end seperate
        tests:
          - test_project_date
          
      # - name: planned_start_date
      #   description: "Project planned start date"
      #   tests:
      #     - project_planned_start_not_null    # ğŸ‘ˆ è‡ªå®šä¹‰ testï¼šå¿…é¡»éç©º
          
      - name: planned_start_date
        tests:
          - test_project_planned_start_not_null
          
      # - name: planned_end_date
      #   description: "Project planned end date"
      #   tests:
      #     # è‡ªå®šä¹‰ testï¼šend è¦ä¹ˆä¸ºç©ºï¼Œè¦ä¹ˆå¿…é¡» >= start
      #     - project_planned_end_after_start_or_null:
      #         start_column: planned_start_date
              
      - name: planned_end_date
        tests:
          - test_project_planned_end_after_start_or_null


  # ===================== BUSINESSUNIT DIM =====================
  - name: businessunit_dim
    description: "Dimension table for business units"
    columns:
      - name: unitkey
        description: "Surrogate key for business unit"
        tests:
          - not_null        # é«˜äº®è¦æ±‚
          - unique

      - name: unitid
        description: "Natural business unit id"
        tests:
          - not_null        # é«˜äº®è¦æ±‚

      - name: name
        description: "Business unit name"
        tests:
          - not_null        # æ–‡æ¡£é‡Œæ˜¯â€œName: Not Null??â€ æŒ‰ Not Null å†™


  # ===================== CLIENT DIM =====================
  - name: client_dim
    description: "Dimension table for clients"
    columns:
      - name: client_key
        description: "Surrogate key for client"
        tests:
          - not_null        # é«˜äº®è¦æ±‚
          - unique

      - name: client_id
        description: "Natural client id"
        tests:
          - not_null        # é«˜äº®è¦æ±‚

      - name: client_name
        description: "Client name"
        tests:
          - not_null        # é«˜äº®è¦æ±‚

      # phone / email æ ¼å¼é‚£ä¸¤ä¸ªæ˜¯ HR mart é‚£è¾¹è´Ÿè´£çš„ï¼Œå¦‚æœä½ ä»¬åˆ†å·¥æ˜ç¡®å¯ä»¥ä¸å†™ï¼›
      # å¦‚æœä½ æƒ³é¡ºæ‰‹åšï¼Œä¹Ÿå¯ä»¥å†åŠ è‡ªå®šä¹‰ regex testï¼ˆæˆ‘ä»¬ç°åœ¨å…ˆæŒ‰æ–‡æ¡£åˆ†å·¥ä¸å†™ï¼‰
